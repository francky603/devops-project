<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cats vs Dogs -- Result</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <div id="content-container">
      <div id="choice">
        <div class="choice cats">
          <div class="label">Cats</div>
          <div class="stat" id="aPercent">0%</div>
        </div>
        <div class="divider"></div>
        <div class="choice dogs">
          <div class="label">Dogs</div>
          <div class="stat" id="bPercent">0%</div>
        </div>
      </div>
    </div>
    <div id="result">
      <span id="total">No votes yet</span>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
      socket.on('update', data => {
        document.getElementById('aPercent').textContent = data.aPercent.toFixed(1) + '%';
        document.getElementById('bPercent').textContent = data.bPercent.toFixed(1) + '%';
        document.getElementById('total').textContent = data.total >= 2 ? data.total + ' votes' : data.total + ' vote';
      });
    </script>
  </body>
</html>
